<!DOCTYPE html><html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ğŸ” OTTçŸ­ç½‘å€ç”Ÿæˆå™¨</title>
<style>
  body {
    font-family: system-ui, sans-serif;
    padding: 2em;
    max-width: 600px;
    margin: auto;
    background: radial-gradient(circle at top, #0a1a3a, #000);
    color: #fff;
  }
  h1 {
    text-align: center;
    background: linear-gradient(90deg, #00b7ff, #0078ff);
    -webkit-background-clip: text;
    color: transparent;
    font-size: 1.8em;
    font-weight: bold;
    margin-bottom: 1em;
    text-shadow: 0 0 12px #0078ff;
  }
  label { display: block; margin-top: 1em; font-weight: bold; }
  input, button {
    width: 100%;
    padding: .8em;
    margin-top: .5em;
    border-radius: 10px;
    border: 1px solid #0078ff;
    font-size: 1em;
  }
  input {
    background: #0d1b2a;
    color: #fff;
  }
  .generate-btn {
    background: linear-gradient(90deg, #ff004c, #ff7700);
    color: #fff;
    font-size: 1.1em;
    cursor: pointer;
    transition: 0.25s;
    border: none;
    box-shadow: 0 0 15px #ff3355;
  }
  .generate-btn:hover {
    transform: scale(1.05);
    box-shadow: 0 0 25px #ff6600;
    background: linear-gradient(90deg, #ff6600, #ff0033);
  }
  pre {
    background: #0d1b2a;
    padding: 1em;
    border-radius: 10px;
    word-break: break-all;
    border: 1px solid #0078ff;
    margin-top: 0.5em;
  }
  .time-btns {
    display: flex;
    justify-content: space-between;
    margin-top: 1em;
    gap: 10px;
  }
  .time-btns button {
    flex: 1;
    background: linear-gradient(90deg, #0078ff, #00b7ff);
    border: none;
    box-shadow: 0 0 10px #0078ff;
    transition: 0.25s;
  }
  .time-btns button:hover {
    background: linear-gradient(90deg, #00b7ff, #0078ff);
    transform: scale(1.05);
  }
  footer {
    text-align: center;
    margin-top: 2.5em;
    font-size: 0.9em;
    color: #00e0ff;
    text-shadow: 0 0 12px #00e0ff;
    animation: glow 3s ease-in-out infinite alternate;
  }
  @keyframes glow {
    from { text-shadow: 0 0 8px #00e0ff, 0 0 16px #00e0ff; }
    to { text-shadow: 0 0 20px #ff004c, 0 0 40px #ff6600; color: #ffddcc; }
  }
  .hidden { display: none !important; }
  .lang-buttons {
    display: flex;
    justify-content: space-between;
    gap: 8px;
    margin-top: 1.5em;
  }
  .lang-buttons button {
    flex: 1;
    background: linear-gradient(90deg, #0078ff, #00b7ff);
    border: none;
    padding: 0.7em;
    border-radius: 10px;
    cursor: pointer;
    color: #fff;
    font-weight: bold;
    transition: 0.25s;
  }
  .lang-buttons button:hover {
    transform: scale(1.05);
    background: linear-gradient(90deg, #00b7ff, #0078ff);
  }
</style>
</head>
<body><h1>ğŸ”OTTçŸ­ç½‘å€ç”Ÿæˆå™¨</h1><input id="secret" value="mySuperSecretKey" style="display:none">
<input id="domain" value="https://powertech.ott-1f4.workers.dev/" style="display:none"><label>ç”¨æˆ· UID</label> <input id="uid" placeholder="ä¾‹å¦‚ user123">

<label>è¿‡æœŸæ—¥æœŸæ—¶é—´ï¼ˆé©¬æ¥è¥¿äºšæ—¶é—´ï¼‰</label> <input id="exp" type="datetime-local">

<div class="time-btns">
  <button type="button" onclick="setExpiryMonths(1)">ğŸ—“ï¸1ä¸ªæœˆ</button>
  <button type="button" onclick="setExpiryMonths(12)">ğŸ“† 1å¹´</button>
  <button type="button" onclick="setExpiryMonths(1200)">â™¾ï¸ æ°¸ä¹…</button>
</div><button class="generate-btn" onclick="generateFull()">ğŸš€ ç”Ÿæˆç­¾åå¹¶åˆ›å»ºçŸ­ç½‘å€</button>

<pre id="output" class="hidden"></pre><h3>ğŸ”— çŸ­ç½‘å€</h3>
<pre id="shortOutput">(ç”Ÿæˆä¸­...)</pre>
<button id="copyLongBtn" class="hidden" onclick="copyLongURL()">ğŸ“‹ å¤åˆ¶é•¿é“¾æ¥</button>
<button id="copyShortBtn" class="hidden" onclick="copyShortURL()">ğŸ“‹ å¤åˆ¶çŸ­ç½‘å€</button>
<button id="copyDescBtn" class="hidden" onclick="copyDescription()">ğŸ“„ å¤åˆ¶è¯´æ˜æ–‡å­—</button><div class="lang-buttons">
  <button onclick="toggleLang('cn')">ğŸ‡¨ğŸ‡³ ä¸­æ–‡</button>
  <button onclick="toggleLang('en')">ğŸ‡¬ğŸ‡§ English</button>
  <button onclick="toggleLang('my')">ğŸ‡²ğŸ‡¾ Melayu</button>
</div><pre id="desc" class="hidden"></pre><footer>Â© 2025 @By PowerTech</footer><script>
function getMalaysiaNow() {
  const now = new Date();
  return new Date(now.getTime() + 8 * 60 * 60 * 1000);
}
function setExpiryMonths(months) {
  const expInput = document.getElementById("exp");
  const malaysiaNow = getMalaysiaNow();
  if (months >= 1200) malaysiaNow.setFullYear(malaysiaNow.getFullYear() + 100);
  else malaysiaNow.setMonth(malaysiaNow.getMonth() + months);
  expInput.value = malaysiaNow.toISOString().slice(0,16);
}
async function hmacSHA256(text, secret) {
  const key = await crypto.subtle.importKey(
    "raw", new TextEncoder().encode(secret),
    { name: "HMAC", hash: "SHA-256" },
    false, ["sign"]
  );
  const sigBuf = await crypto.subtle.sign("HMAC", key, new TextEncoder().encode(text));
  return Array.from(new Uint8Array(sigBuf)).map(b => b.toString(16).padStart(2, "0")).join("");
}
async function generateFull() {
  try {
    const uidEl = document.getElementById("uid");
    const uid = uidEl && typeof uidEl.value === 'string' ? uidEl.value.trim() : '';
    const secret = document.getElementById("secret").value.trim();
    const domain = document.getElementById("domain").value.trim();
    const expStr = document.getElementById("exp").value;
    if (!uid || !expStr) {
      alert("è¯·å¡«å†™ UID ä¸ åˆ°æœŸæ—¶é—´ã€‚");
      return;
    }
    const expLocal = new Date(expStr);
    const expMillis = expLocal.getTime();
    const text = `${uid}:${expMillis}`;
    const sig = await hmacSHA256(text, secret);
    const longURL = `${domain}?uid=${encodeURIComponent(uid)}&exp=${expMillis}&sig=${sig}`;

    document.getElementById("output").textContent = longURL;
    document.getElementById("copyLongBtn").classList.remove('hidden');

    const res = await fetch("https://short.ott-eaf.workers.dev/", {
      method: "POST", headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ longURL })
    });
    const data = await res.json();
    if (data.shortURL) {
      document.getElementById("shortOutput").textContent = data.shortURL.replace(/^https?:\/\//, "");
      document.getElementById("copyShortBtn").classList.remove('hidden');
      document.getElementById("copyDescBtn").classList.remove('hidden');
    } else {
      alert("çŸ­é“¾æœåŠ¡æœªè¿”å›çŸ­ç½‘å€ï¼Œè¯·æ£€æŸ¥æœåŠ¡ã€‚");
    }
  } catch (err) {
    alert("ç”ŸæˆçŸ­é“¾æ—¶å‘ç”Ÿé”™è¯¯ï¼Œè¯·æŸ¥çœ‹æ§åˆ¶å°ã€‚");
  }
}
function formatDateMY(date) {
  return date.toLocaleDateString("zh-CN", { year: "numeric", month: "2-digit", day: "2-digit", timeZone: "Asia/Kuala_Lumpur" });
}
function toggleLang(lang) {
  const shortURL = document.getElementById("shortOutput").textContent.trim();
  if (!shortURL || shortURL.includes("(ç”Ÿæˆä¸­")) {
    alert("è¯·å…ˆç”ŸæˆçŸ­ç½‘å€ï¼");
    return;
  }
  const uidEl = document.getElementById("uid");
  const uid = uidEl && typeof uidEl.value === 'string' ? uidEl.value.trim() : '';
  const now = getMalaysiaNow();
  const expInputValue = document.getElementById("exp").value;
  const exp = expInputValue ? new Date(expInputValue) : now;
  const buyDate = formatDateMY(now);
  const expDate = formatDateMY(exp);
  const lastLine = `ğŸ‘¤ User Name: ${uid || "(æœªå¡«å†™)"}`;

  let text = "";
  if(lang === "cn") {
    text = `ğŸ‡¨ğŸ‡³ ä¸­æ–‡è¯´æ˜ï¼š
    \n\nğŸ“² ä¸‹è½½ä¸å®‰è£… OTT åº”ç”¨
    \n\nåœ¨ Play å•†åº— (Play Store)
    \næœç´¢å¹¶å®‰è£…ä»¥ä¸‹å…¶ä¸­ä¸€ä¸ªåº”ç”¨ï¼š
    \n\nğŸ”µ OTT TVï¼ˆç”µè§†ç‰ˆæœ¬ï¼‰
    \nğŸŸ¢ OTT PLAYERï¼ˆæ‰‹æœºç‰ˆæœ¬ï¼‰
    \n\nâš ï¸ åªéœ€ä¸‹è½½å…¶ä¸­ä¸€ä¸ªå³å¯ï¼
    \n\nğŸ“± é«˜çº§ç‰ˆAPPä¸‹è½½é“¾æ¥ï¼š
    \n   https://bit.ly/tt1733  
    \nï¼ˆå¦‚éœ€ä½¿ç”¨æ›´å¤šåŠŸèƒ½ï¼Œè¯·ä¸‹è½½é«˜çº§ç‰ˆï¼‰  
    \n---\nğŸ§­ ä½¿ç”¨æ­¥éª¤ï¼š
    \n\n1. æ‰“å¼€ OTT Player / TV åº”ç”¨
    \n2. ç‚¹å‡»å³ä¸Šè§’ è®¾ç½® (Settings)
    \n3. é€‰æ‹© Providerï¼ˆä¾›åº”å•†ï¼‰
    \n4. ç‚¹å‡» Add Providerï¼ˆæ·»åŠ ä¾›åº”å•†ï¼‰
    \n5. é€‰æ‹© Playlistï¼ˆæ’­æ”¾åˆ—è¡¨ï¼‰
    \n6. è¾“å…¥ä»¥ä¸‹ URL å¹¶ç‚¹å‡» Applyï¼ˆåº”ç”¨ï¼‰
    \n\nğŸ“Œ âœ… 1 ä¸ªé“¾æ¥ä»…é™ 1 å°è®¾å¤‡ä½¿ç”¨ï¼
    \nğŸ‘‡ğŸ‘‡æ’­æ”¾åˆ—è¡¨ URL é“¾æ¥ğŸ‘‡ğŸ‘‡
    \nğŸ‘‰ ${shortURL}
    \n\nâš ï¸ â›”ï¸ åŒä¸€é“¾æ¥å¤šè®¾å¤‡ä½¿ç”¨å°†ä¼šè‡ªåŠ¨å°ç¦ï¼
    \nğŸš« åˆ«ç”¨å…¶ä»–è®¾å¤‡æ‰“å¼€ ID é“¾æ¥ï¼Œä¼šè‡ªåŠ¨å°ç¦ï¼
    \n\nğŸ•’ è´­ä¹°æ—¥æœŸï¼š${buyDate}
    \nğŸ“… åˆ°æœŸæ—¥æœŸï¼š${expDate}
    \n${lastLine}`;
  } else if (lang === "en") {
    text = `ğŸ‡¬ğŸ‡§ English Instructionsï¼š\n\nğŸ“² Download & Install OTT App\n\nGo to Play Store and search for OTT.\nDownload one of the following appsï¼š\n\nğŸ”µ OTT TV (for TV)\nğŸŸ¢ OTT PLAYER (for mobile)\n\nâš ï¸ Download only ONE of them!\nğŸ“± Premium APP download linkï¼š\n   https://bit.ly/tt1733\n(Download the premium version for extra features)\n---\nğŸ§­ Setup Stepsï¼š\n\n1. Open OTT Player / TV app\n2. Tap the Settings icon\n3. Select Provider\n4. Tap Add Provider\n5. Choose Playlist\n6. Enter the URL below and click Apply\n\nğŸ“Œ âœ… 1 URL for 1 Device Only!\nğŸ‘‡ğŸ‘‡ Playlist URL Link ğŸ‘‡ğŸ‘‡\nğŸ‘‰ ${shortURL}\n\nâš ï¸ â›”ï¸ If used on multiple devices, it will be auto-banned!\nğŸš« Do NOT open the ID link on other devices â€” it will be auto-bannedï¼\n\nğŸ•’ Purchase Date (MYT)ï¼š${buyDate}\nğŸ“… Expiry Date (MYT)ï¼š${expDate}\n${lastLine}`;
  } else {
    text = `ğŸ‡²ğŸ‡¾ Bahasa Melayuï¼š\n\nğŸ“² Muat Turun & Pasang Aplikasi OTT\n\nBuka Play Store dan cari â€œOTTâ€\nPasang salah satu aplikasi berikutï¼š\n\nğŸ”µ OTT TV (Versi TV)\nğŸŸ¢ OTT PLAYER (Versi telefon)\n\nâš ï¸ Muat turun satu sahaja!\nğŸ“± Pautan muat turun APP Premiumï¼š\n   https://bit.ly/tt1733\n(Muat turun versi premium untuk ciri tambahan)\n---\nğŸ§­ Langkah Penggunaanï¼š\n\n1. Buka aplikasi OTT Player / TV\n2. Tekan ikon Tetapan (Settings)\n3. Pilih Provider (Penyedia)\n4. Tekan Add Provider (Tambah Penyedia)\n5. Pilih Playlist (Senarai Main)\n6. Masukkan URL di bawah dan tekan Apply\n\nğŸ“Œ âœ… 1 URL hanya untuk 1 peranti sahaja!\nğŸ‘‡ğŸ‘‡ Playlist Pautan Akaun URL ğŸ‘‡ğŸ‘‡\nğŸ‘‰ ${shortURL}\n\nâš ï¸ â›”ï¸ Jika digunakan pada lebih daripada satu peranti, akaun akan diharamkanï¼\nğŸš« Jangan buka pautan ID pada peranti lain â€” ia akan diharamkan secara automatikï¼\n\nğŸ•’ Tarikh Pembelian (MYT)ï¼š${buyDate}\nğŸ“… Tarikh Tamat (MYT)ï¼š${expDate}\n${lastLine}`;
  }
  const desc = document.getElementById("desc");
  desc.textContent = text;
  desc.classList.remove("hidden");
}
async function copyLongURL() {
  const text = document.getElementById("output").textContent.trim();
  if (!text) return;
  try { await navigator.clipboard.writeText(text); } catch {}
}
async function copyShortURL() {
  const text = document.getElementById("shortOutput").textContent.trim();
  try { await navigator.clipboard.writeText(text); } catch {}
}
async function copyDescription() {
  const text = document.getElementById("desc").textContent.trim();
  if (!text) return;
  try { await navigator.clipboard.writeText(text); } catch {}
}

// === ä¿®å¤ copyLongURLï¼šæ”¾åœ¨å…¨å±€ã€ç¡®ä¿å¯è°ƒç”¨ ===
async function copyLongURL() {
  const text = document.getElementById("output").textContent.trim();
  if (!text) return;
  try {
    await navigator.clipboard.writeText(text);
  } catch (e) {}
}

</script></body>
</html>
